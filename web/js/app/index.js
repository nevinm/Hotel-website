var bootstrap=null,Bootstrap=function(){};Bootstrap.prototype={checkPromocode:function(a){var b=baseURL+"verify_promocode/",c={promocode:a},d={},e=JSON.stringify(c);(new AjaxHttpSender).sendPost(b,d,e,this.checkPromocodeCallback,a)},checkPromocodeCallback:{success:function(a,b,c){var d=JSON.parse(a);1==d.status?window.open(homeUrl+"/share/"+c+"/","_self"):showPopup(d)},failure:function(a,b,c){}},shouldFullpageRender:function(){if($("#section-what-is .fp-tableCell").innerHeight()>window.innerHeight||this.fullPageRender(),$(window).width()>ipadWidth){var a=$(".contentArea").offset().left-10;$("#section-what-is .outer-slide-description").css("margin-left",a+"px")}else $("#section-what-is .outer-slide-description").css("margin-left","")},fullPageRender:function(){var a=$("#header").innerHeight(),b=window.innerHeight-a,c=$("#section-what-is").innerHeight(),d=$("#section-what-is-meisterdish .slider-header-containter").innerHeight(),e=parseInt($("#section-what-is-meisterdish").css("padding-top").split("px")[0]),f=$("#slider-footer").innerHeight(),g=b-c-d;$("#section-what-is").css({height:c+g-e}),$("#section-zipcode").css({height:b-f}),$("#sectionPromocode").height($("#section-zipcode").height()+10)},addToCart:function(a,b){var c=baseURL+"add_to_cart/",d={"session-key":localStorage.session_key},e={meal_id:a,quantity:b},f=JSON.stringify(e),g=new AjaxHttpSender;g.sendPost(c,d,f,this.addToCartCallback,a)},addToCartCallback:{success:function(a,b,c){var d=JSON.parse(a),e=d.status;-1==e?showPopup(d):(bootstrap.populateOverlayDetails(d),CartItemCount())},failure:function(a,b,c){}},getMainMealId:function(){var a=baseURL+"get_home_meal/",b={"session-key":localStorage.session_key},c={},d=JSON.stringify(c),e=new AjaxHttpSender;e.sendPost(a,b,d,this.getMainMealIdCallback)},getMainMealIdCallback:{success:function(a,b){var c=JSON.parse(a);1==c.status?bootstrap.getHomePageMeal(c.meal_id):showPopup(c)},failure:function(a,b,c){}},getHomePageMeal:function(a){var b=baseURL+"get_meal_details/0/",c={"session-key":localStorage.session_key},d={},e=JSON.stringify(d),f=new AjaxHttpSender;f.sendPost(b,c,e,this.getHomePageMealCallback)},getHomePageMealCallback:{success:function(a,b){var c=JSON.parse(a);1==c.status&&bootstrap.populateHomePageMeal(c)},failure:function(a,b,c){}},populateHomePageMeal:function(a){var b=$("#section-what-to-expect");b.find(".meal-name p").text(a.name),b.find(".meal-image img").attr("src",a.main_image.url),b.find(".meal-sub-description p").text(a.sub),b.find(".meal-properties .preparation-time").text(a.preparation_time),b.find(".meal-properties .calories").text(a.calories),$.each(a.ingredients,function(a,c){b.find(".ingredients-wrapper").append("<div class='details-content'><p class='upper-content'><img src='"+c.image_url+"'></p><p class='lower-content'>"+c.name+"</p></div>")}),a.meal_types.length?$.each(a.meal_types,function(a,b){var c='<div class="details-content"><p class="upper-content"><img class="meal-type-description-icon meal-type-icon" src="'+b.image_url+'"></p><p class="lower-content meal-type">'+b.meal_type_name+"</p></div>";$(".meal-properties-section").append(c)}):b.find(".meal-properties .meal-type-icon").css("display","none"),$("#meal-info").attr("data-id",a.id),$("#meal-add").attr("data-id",a.id),$(".removeItemButton").attr("data-id",a.id),$(".meal-overlay").attr("data-id",a.id),$(".sold-overlay").attr("data-id",a.id),$(".meal-overlay .upper-line span").text(a.quantity),$("#hidden-count").val(a.quantity),a.quantity<2?($(".meal-overlay").hide(),$(".removeItemButton").hide()):($(".meal-overlay").show(),$(".removeItemButton").css("display","inline-block")),a.quantity>=10?$("#meal-add").addClass("button-disabled"):$("#meal-add").removeClass("button-disabled"),0==a.sold_out?$(".sold-overlay").hide():($(".meal-overlay").hide(),$(".removeItemButton").hide(),$(".sold-overlay").show(),$("#meal-add").addClass("button-disabled"))},updateHeight:function(){var a=window.innerHeight,b=.7*a;$("#section-what-is").css({height:b}),$("#section-what-is .fp-slide").css({height:b}),$("#section-what-is .fp-tableCell").css({height:b})},correctMarginTop:function(){var a=window.innerHeight,b=-(.15*a);console.log(window.innerWidth),window.innerHeight>700?(console.log("Margin corrected"),$("#section-what-is-meisterdish").css({"margin-top":b})):$("#section-what-is-meisterdish").css({"margin-top":0})},isSessionExpired:function(){if(null===localStorage.getItem("session-expired"));else{var a={};a.message="Your session has expired, please login.",showPopup(a),localStorage.removeItem("session-expired")}},locationCheck:function(a){var b=baseURL+"check_delivery/",c={"session-key":localStorage.session_key},d={zip:a},e=JSON.stringify(d),f=new AjaxHttpSender;f.sendPost(b,c,e,this.locationCheckCallback)},locationCheckCallback:{success:function(a,b){var c=JSON.parse(a);1==c.status?($("#close").remove(),$("#see-menu").remove(),$(".popup .header").append('<img src="images/cross-black.png" id="close">'),$(".popup .button").append("<a href='views/menu.html' class='btn btn-large-secondary' id='see-menu'>SEE MENU</a>"),showPopup(c)):bootstrap.showLocationCheckPopup(c)},failure:function(a,b,c){}},showLocationCheckPopup:function(a){var b=a.message;$(".delivery-area-check-popup .deliver-message span").text(b),$(".delivery-area-check-popup").show(),$("form#validate-email").validate().resetForm()},saveEmail:function(a,b){var c=baseURL+"save_email/",d={"session-key":localStorage.session_key},e={email:a,zipcode:b},f=JSON.stringify(e),g=new AjaxHttpSender;g.sendPost(c,d,f,this.saveEmailCallback)},saveEmailCallback:{success:function(a,b){var c=JSON.parse(a);$(".delivery-area-check-popup").hide(),showPopup(c)},failure:function(a,b,c){}},populateOverlayDetails:function(a){$(".meal-overlay .upper-line span").text(a.quantity),0==a.quantity?($(".removeItemButton").hide(),$(".meal-overlay").hide()):($(".removeItemButton").fadeIn(),$(".removeItemButton").css("display","inline-block"),$(".meal-overlay").show()),a.quantity>=10?$("#meal-add").addClass("button-disabled"):$("#meal-add").removeClass("button-disabled"),a.session_key&&a.session_key.length&&(localStorage.session_key=a.session_key,createCookie("SessionExpireTime","true",sessionExpiryTime))}},$(document).ready(function(){bootstrap=new Bootstrap,window.onunload=function(){},window.onbeforeunload=function(a){0===cartCount&&cartCount<parseInt($("#hidden-count").val())&&SessionController.fbTrackConversionEvent(SessionController.getAddToCartPixel(),"0.00","USD")},ipadWidth=767,CartItemCount(setCartCount),bootstrap.getMainMealId(),bootstrap.shouldFullpageRender(),"true"==localStorage.loggedIn&&$("#sectionPromocode").hide(),$(".check-delivery").on("click",function(a){a.preventDefault();var b=$("#zip-code").val();$("form.zip-code-container").valid()&&bootstrap.locationCheck(b)}),$("#promoCheck").on("click",function(a){a.preventDefault(),$("form.promo-code-container").valid()&&bootstrap.checkPromocode($("#promoCode").val())}),$("body").on("load",bootstrap.isSessionExpired),$("#submit-email").on("click",function(a){a.preventDefault();var b=$("input[type=email]").val(),c=$("#zip-code").val();$("form#validate-email").valid()&&bootstrap.saveEmail(b,c)}),$(".delivery-area-check-popup img#cancel").on("click",function(){$(".delivery-area-check-popup").fadeOut()}),$("#meal-info").on("click",function(){mealId=$(this).attr("data-id"),window.location.href="views/meal-details.html?mealId="+mealId}),$("#meal-add").on("click",function(){var a=$(this).attr("data-id"),b=0;b=parseInt($("#hidden-count").val())+2,10>=b&&($("#hidden-count").val(b),bootstrap.addToCart(a))}),$(".removeItemButton").on("click",function(){var a=-2,b=0,c=$(this).attr("data-id");b=parseInt($("#hidden-count").val())-2,b>=0&&($("#hidden-count").val(b),bootstrap.addToCart(c,a))}),$(window).resize(function(){bootstrap.shouldFullpageRender()})});
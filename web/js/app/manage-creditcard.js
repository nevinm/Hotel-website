function savedCardDetails(){var a=baseURL+"get_saved_cards/",b={"session-key":localStorage.session_key},c={};data=JSON.stringify(c);var d=new AjaxHttpSender;d.sendPost(a,b,data,savedCardDetailsCallback)}function populateCardDetails(a){var b;$.each(a,function(c,d){b=a[c].number.slice(-4),$(".card-list-container").append("<div class='saved-card-list'><input type='radio' class='checkbox-green payment-checked' name='saved-card' id='"+d.id+"'><label for='"+d.id+"'><img class='paypal' src='"+d.logo+"'><div class='card-details-small'><div class='body-text-small'>"+d.type+" ending in "+b+"</div><div class='body-text-small'>Expires on "+d.expire_month+"/"+d.expire_year+"</div></div></label></div>")})}function deleteCreditCard(a){var b=baseURL+"delete_credit_card/"+a+"/",c={"session-key":localStorage.session_key},d={};data=JSON.stringify(d);var e=new AjaxHttpSender;e.sendPost(b,c,data,deleteCreditCardCallback,a)}$(document).ready(function(){CartItemCount(),savedCardDetails(),$(document).on("click","input[name=saved-card]",function(){$("#delete-card").removeClass("button-disabled")}),$("#delete-card").on("click",function(){$("input[name=saved-card]").each(function(){var a=$(this);a.is(":checked")&&(delete_id=a.attr("id"),deleteCreditCard(delete_id))})}),$(document).on("click","img.paypal,.card-details-small",function(){var a=$(this).closest(".saved-card-list").find("input[type=radio]").attr("id");window.location="add-creditcard.html?cardId="+a})});var savedCardDetailsCallback={success:function(a,b){cardDetails=JSON.parse(a),1==cardDetails.status?0!=cardDetails.cards.length?($("#manage-payment-method-container .message").hide(),populateCardDetails(cardDetails.cards)):($("#manage-payment-method-container .message").show(),$("#update-payment").hide()):showPopup(cardDetails)},failure:function(a,b,c){}},deleteCreditCardCallback={success:function(a,b,c){var d=JSON.parse(a);1==d.status?(showPopup(d),$("#"+c).parent().remove(),$(".card-list-container").is(":empty")?$("#manage-payment-method-container .message").show():$("#manage-payment-method-container .message").hide()):showPopup(d)},failure:function(a,b,c){}};
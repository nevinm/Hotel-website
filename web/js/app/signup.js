function signingup(){var a=baseURL+"signup/",b={},c="",d=$("#signup-password").val(),e=$("#signup-firstname").val(),f=$("#signup-lastname").val(),g=$("#signup-email").val(),h=$("#zip-code").val(),i=$("#invite-code").val();localStorage["fb-id"]&&(c=JSON.parse(localStorage["fb-id"]));var j={password:d,first_name:e,last_name:f,email:g,fb_id:c,image_url:localStorage["fb-image"],zipcode:h,referral_code:i},k=JSON.stringify(j),l=new AjaxHttpSender;l.sendPost(a,b,k,signupCallback)}function referralUIIntegrate(){$(".email-wrapper").append("<div class='signup-input invitecode-container'><label class='body-text-small' >Invite Code</label><input class='arrange' type='text' id='invite-code' name='invitecode'></input></div>"),$(".password-container").removeClass("fifty-percent-first"),$(".zipcode-container").removeClass("fifty-percent-second"),$(".zipcode-container").addClass("fifty-percent-first"),$(".invitecode-container").addClass("fifty-percent-second")}function signupInit(){"true"==localStorage.loggedIn&&($(".popup-container .content span").text("You're already logged in!"),$("#close").text("OK"),$(".popup-wrapper").show()),$("#close").on("click",function(a){a.preventDefault(),$(".popup-wrapper").hide(),$(".popup-container .content span").text("SOMTHING WENT WRONG"),$("#close").text("CLOSE"),redirectIfLoggedIn()}),CartItemCount(),referralCode=getParameterFromUrl("ref"),checkPromocode(referralCode),referralCode.length&&(referralUIIntegrate(),$("#invite-code").val(referralCode))}function checkPromocode(a){var b=baseURL+"verify_promocode/",c={promocode:a},d={},e=JSON.stringify(c);(new AjaxHttpSender).sendPost(b,d,e,checkPromocodeCallback,a)}var signupCallback={success:function(a,b){if(userDetails=JSON.parse(a),-1==userDetails.status)showPopup(userDetails);else{$(".signup-formcontainer")[0].reset(),showPopup(userDetails);var c="Please note that a guest user account already exists with your email";if(userDetails.message.match(c)){var d=userDetails.message.split(c),e=d[0]+"<br>"+c+d[1];$(".popup-container .content span").html(e),$(".popup-container").attr("style","padding:0px")}ga("send",{hitType:"event",eventCategory:"button",eventAction:"click",eventLabel:"Account Creation",eventValue:4}),SessionController.fbTrackConversionEvent(SessionController.getSignUpPixel(),"0.00","USD")}},failure:function(a,b,c){}},checkPromocodeCallback={success:function(a,b,c){var d=JSON.parse(a);1==d.status&&($(".referral-message-container .message").text(d.label),$(".referral-message-container").show())},failure:function(a,b,c){}};$(document).ready(function(){signupInit(),window.onunload=function(){},$("#signup-button").on("click",function(a){a.preventDefault(),$("form").valid()&&signingup()})});
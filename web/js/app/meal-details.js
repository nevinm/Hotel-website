function tabRendering(){var a=$("#meal-tabs").tabs();$(".next-tab").click(function(b){b.preventDefault(),a.tabs("option","hide",{effect:"slide",direction:"left",duration:300}),a.tabs("option","show",{effect:"slide",direction:"right",duration:300});var c=a.tabs("option","active");a.tabs("option","active",c+1)}),$(".prev-tab").click(function(b){b.preventDefault(),a.tabs("option","hide",{effect:"slide",direction:"right",duration:300}),a.tabs("option","show",{effect:"slide",direction:"left",duration:300});var c=a.tabs("option","active");a.tabs("option","active",c-1)})}function addToCart(a,b){var c=baseURL+"add_to_cart/",d={"session-key":localStorage.session_key},e={meal_id:a,quantity:b};data=JSON.stringify(e);var f=new AjaxHttpSender;f.sendPost(c,d,data,addToCartCallback,a)}function getMealDetails(a){var b=baseURL+"get_meal_details/"+a+"/",c={"session-key":localStorage.session_key},d={},e=JSON.stringify(d),f=new AjaxHttpSender;f.sendPost(b,c,e,getMealDetailsCallback)}function populateMealDetails(a){mealDetailsTab(a),mealPreparationTab(a),allYouNeedTab(a),ingredientsTab(a),tipsTricksTab(a),nutrientsTab(a),reviewsTab(a),$("#meal-tabs").tabs({activate:function(a,b){"ui-id-7"==b.newTab.context.id&&(!$("#reviews .container").find(".list-review").length>0?$(".review-message").fadeIn():$(".review-message").hide())}})}function mealDetailsTab(a){$(".add-meal").attr("data-id",a.id),$(".removeItemButton").attr("data-id",a.id),$(".hidden-field").val(a.quantity),$(".add-meal-message span").text(a.quantity),$(".meal-overlay .upper-line span").text(a.quantity),$(".meal-name").text(a.name),$(".price").text(dollarConvert((a.price+a.tax).toFixed(2))),$(".thumbnail").attr("src",a.main_image.url),$(".thumbnail").attr("data-id",a.main_image.id),$(".chef-img").attr("src",a.chef_image.url),$(".chef-img").attr("data-id",a.chef_image.id),$(".chef-comments").text(a.chef_comments),a.quantity>=2&&($(".removeItemButton").show(),$(".add-meal-message").addClass("visible").removeClass("invisible"),$(".meal-overlay").show()),a.description&&$(".details-description span").text(a.description),$(".chef-name").text("CHEF "+a.chef_name),$(".rating-count").text("("+a.ratings_count+")"),$(".meal-ingredients").text(a.sub),0==a.sold_out?$(".sold-overlay").hide():($(".meal-overlay").hide(),$(".sold-overlay").show(),$(".removeItemButton").hide(),$(".add-meal").addClass("button-disabled")),$($("#meal-rating").find(".rating-star").get().reverse()).each(function(b,c){Math.round(a.avg_rating)==b+1&&$(this).trigger("click"),$("#meal-rating").find(".rating-star").each(function(a,b){$(b).addClass("disable-star")})})}function mealPreparationTab(a){$.each(a.user_to_do,function(a,b){$(".user-to-do").append("<li>"+b+"</li>")}),$.each(a.finished_preparation,function(a,b){$(".finished-preparation").append("<li>"+b+"</li>")}),$(".preparation-time").text("ALLOW "+a.preparation_time+" MINUTES"),$(".saved-time").text(a.saved_time+" MINUTES SAVED")}function allYouNeedTab(a){$.each(a.pre_requisites,function(a,b){$(".pre-requisities").append("<li>"+b+"</li>")}),$(".pre-requisities-image").attr("src",a.pre_requisites_image.url),$(".pre-requisities-image").attr("data-id",a.pre_requisites_image.id)}function ingredientsTab(a){a.ingredients.length?$.each(a.ingredients,function(a,b){$(".ingredients").append("<li>"+b.name+"</li>"),$("#ingredients").find(".image-container").append("<div class='details-content'><img class='ingredients-image' src='"+b.image_url+"'><span class='lower-content ingredients-text'>"+b.name+"</span></div>")}):$(".ingredients").append("<div class='ingredients-message review-message'>No ingredients present.</div>")}function tipsTricksTab(a){$("#tips-and-tricks .video-container").remove(),a.tips.length?$(a.tips).each(function(a,b){$("#tips-and-tricks").append("<div class='section'><div class='container'><span class='mob-view-header tips-header'>"+b.title+"</span><div class='video-container' data-id='"+b.id+"'></div><div class='list-container'><span class='list-header tips-header'>"+b.title+"</span><ul class='video-tips'></ul></div></div></div>"),imgValidation(b.video_url)?$("#tips-and-tricks .video-container[data-id = '"+b.id+"']").append("<img src = '"+b.video_url+"'>"):ytVidId(b.video_url)&&$("#tips-and-tricks .video-container[data-id = '"+b.id+"']").append("<iframe height='280' id='tips-video' type='application/x-shockwave-flash'src='https://youtube.com/embed/"+convertToEmbedded(b.video_url)+"' frameborder='0' allowfullscreen=''></iframe>"),$(b.description).each(function(a,b){$(".video-tips:last").append("<li>"+b+"</li>")})}):$("#tips-and-tricks").append("<div class='section'><p>NO TIPS AND TRICKS ARE ADDED FOR THIS MEAL YET.</p></div>")}function nutrientsTab(a){if(a.nutrients.length){var b="";$.each(a.nutrients,function(a,c){b+="";var d=!1,e="",f="<tr><td>"+c.mainNutrient+"</td><td class='per-serving'>"+c.perServing+"</td><td>"+c.dailyValue+"</td></tr>";c.subNutrients.length&&$.each(c.subNutrients,function(a,b){(b.servingValue.length>0||b.dailyValue.length>0)&&(d=!0,e+="<tr><td class='sub-nutrients'>"+b.nutrientsName+"</td><td class='per-serving'>"+b.servingValue+"</td><td>"+b.dailyValue+"</td></tr>")}),(c.perServing.length>0||c.dailyValue.length>0||d)&&(b+=f),d&&(b+=e)}),$("#nutrient-table tbody").html(b)}else $("#nutrient-table tbody").append("<tr><td><div>No nutrients present....</div></td><td></td><td></td></tr>")}function reviewsTab(a){$.each(a.ratings,function(a,b){$("#reviews .container").append("<div class='list-review'><div class='list-header'>"+b.user_first_name+" "+b.user_last_name+"</div><div class='rating'><span><input type='radio' class='rating-input' id='rating-input-1-5' name='rating-input-1' data-id='5'><label for='rating-input-1-5' class='rating-star'></label><input type='radio' class='rating-input' id='rating-input-1-4' name='rating-input-1' data-id='4'><label for='rating-input-1-4' class='rating-star'></label><input type='radio' class='rating-input' id='rating-input-1-3' name='rating-input-1' data-id='3'><label for='rating-input-1-3' class='rating-star'></label><input type='radio' class='rating-input' id='rating-input-1-2' name='rating-input-1' data-id='2'><label for='rating-input-1-2' class='rating-star'></label><input type='radio' class='rating-input' id='rating-input-1-1' name='rating-input-1' data-id='1'><label for='rating-input-1-1' class='rating-star'></label></span><span class='review-date'>"+b.date.substring(0,10)+"</span></div><span class='description'>"+b.review+"</span></div>");var c=$("#reviews .container").find(".list-review:last"),d=$($(c).find(".rating-star").get().reverse())[b.rating-1];$(c).find(".rating-star").each(function(a,b){$(b).addClass("disable-star")}),$(d).trigger("click")})}function addMultipleMeal(a){var b=$(".removeItemButton");$addButton=$(".add-meal"),$(".add-meal-message").addClass("visible").removeClass("invisible"),$(".add-meal-message span").text(a.quantity),$(".meal-overlay .upper-line span").text(a.quantity),a.quantity>=10?($addButton.hide(),$(".add-meal-message span").text(10),$(".meal-overlay .upper-line span").text(10)):$addButton.show(),0==a.quantity?(b.hide(),$(".meal-overlay").hide(),$(".add-meal-message").addClass("invisible").removeClass("visible")):(b.fadeIn(),$(".meal-overlay").show(),$(".add-meal-message").addClass("visible").removeClass("invisible"))}function foodSettings(a){var b=a.preparation_time,c=a.calories;$("#saved-time").text(b),$("#calories").text(c);var d=a.meal_types;$.each(d,function(a,b){$(".icons-container2").append("<div class='details-content'><span class='upper-content'><img class='meal-type-icon' src='"+b.image_url+"'></span><span class='lower-content'>"+b.meal_type_name+"</span></div>")}),$(".meal-full-details,.meal-details-hr").fadeIn()}function imgValidation(a){var b=/\.(jpeg|jpg|gif|png)$/.test(a);return b}function ytVidId(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?!0:!1}$(document).ready(function(){CartItemCount(setCartCount),window.onbeforeunload=function(a){0===cartCount&&cartCount<parseInt($(".hidden-field").val())&&SessionController.fbTrackConversionEvent(SessionController.getAddToCartPixel(),"0.00","USD")};var a=getParameterFromUrl("mealId");getMealDetails(a),$(".add-meal").on("click",function(){var a=$(this).attr("data-id"),b=0;b=parseInt($(".hidden-field").val())+2,10>=b&&($(".hidden-field").val(b),addToCart(a))}),$(".removeItemButton").on("click",function(){var a=$(this).attr("data-id"),b=0,c=-2;b=parseInt($(".hidden-field").val())-2,b>=0&&($(".hidden-field").val(b),addToCart(a,c))}),tabRendering()}),$(".meal-tab-container ul li a").on("click",function(){$(".meal-tab-container ul li a").removeClass("activeli"),$(this).addClass("activeli")}),$(document).on("click",".rating-star",function(){var a=$(this).prev().attr("data-id"),b=$(this).parent().find(".rating-star");$(b).removeClass("change-color"),$($(b).get().reverse().slice(0,a)).each(function(a,b){$(b).addClass("change-color")})});var addToCartCallback={success:function(a,b,c){var d=JSON.parse(a),e=d.status;-1==e?showPopup(d):(addMultipleMeal(d),CartItemCount(!0),d.session_key&&d.session_key.length&&(localStorage.session_key=d.session_key))},failure:function(a,b,c){}},getMealDetailsCallback={success:function(a,b){mealDetails=JSON.parse(a),1==mealDetails.status?(populateMealDetails(mealDetails),foodSettings(mealDetails)):console.log("somthing wrong with meals")},failure:function(a,b,c){}};
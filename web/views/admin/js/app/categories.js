function getCategories(a){var b=baseURL+"cms/get_categories/";header={"session-key":localStorage.session_key},params={nextPage:a},data=JSON.stringify(params);var c=new AjaxHttpSender;c.sendPost(b,header,data,getCategoriesCallback)}function removeCategories(a){if(confirm("Are you sure you want to delete this category?")){var b=baseURL+"cms/remove_category/";header={"session-key":localStorage.session_key},params={id:a},data=JSON.stringify(params);var c=new AjaxHttpSender;c.sendPost(b,header,data,removeCategoriesCallback)}}function updateCategories(a,b){var c=baseURL+"cms/update_category/";header={"session-key":localStorage.session_key},params={id:a,category:b},data=JSON.stringify(params);var d=new AjaxHttpSender;d.sendPost(c,header,data,updateCategoriesCallback)}function populateCategories(a){$("#categories tbody").empty(),$.each(a.aaData,function(a,b){$("#categories tbody").append("<tr><td class='category' data-name='"+b.name+"'>"+b.name+"</td><td class='delete'><a data-id='"+b.id+"'class='cross'></a></td><td class=''><button class='update btn btn-small-primary medium-green' type='button' data-name='"+b.name+"' data-id='"+b.id+"'>Update</button></td></tr>")}),$(".pagination").pagination({pages:a.num_pages,currentPage:a.current_page,cssStyle:"light-theme",onPageClick:function(a,b){getCategories(a)},onInit:function(){if(getStringAfterHash(location.href,"#")){var a=getStringAfterHash(location.href,"#");-1!=a.indexOf("page")&&(pageNumber=getStringAfterHash(a,"-"),$(".pagination").pagination("getCurrentPage")==pageNumber||$(".pagination").pagination("selectPage",pageNumber))}}})}function addCategories(){$(".add-status").hide();var a=$(".add-category-container .new-category").val(),b=baseURL+"cms/add_category/",c={"session-key":localStorage.session_key},d={category:a},e=JSON.stringify(d),f=new AjaxHttpSender;f.sendPost(b,c,e,addCategoriesCallback)}function hideAddCategory(){$(".add-status").hide(),$(".add-category-container, .update-category-container").hide()}$(document).ready(function(){getCategories(1),$("#add-category").on("click",function(){$(".add-category-container, .update-category-container").hide(),$(".add-category-container").show(),$("form#add-new-category").validate().resetForm()}),$("#add-cancel, #update-cancel").on("click",hideAddCategory),$("#add-confirm").on("click",function(a){a.preventDefault(),$("#add-new-category").valid()&&addCategories()}),$("#update-confirm").on("click",function(a){a.preventDefault();var b=$(".update-category-container .new-category").val(),c=$(".update-category-container .new-category").attr("data-id");$("#update-category-form").valid()&&updateCategories(c,b)}),$(document).on("click",".cross",function(){var a=$(this).data().id;removeCategories(a)}),$(document).on("click",".update",function(){$(".add-category-container, .update-category-container").hide();var a=$(this).data().id,b=$(this).data().name;$(".update-category-container").show(),$(".update-category-container .new-category").attr("data-id",a),$(".update-category-container .new-category").val(b),$("form#update-category-form").validate().resetForm()})});var getCategoriesCallback={success:function(a,b){var c=JSON.parse(a);populateCategories(c)},failure:function(a,b,c){}},removeCategoriesCallback={success:function(a,b){var c=JSON.parse(a);1==c.status?(currentPage=$(".pagination").pagination("getCurrentPage"),getCategories(currentPage)):alert("Something went wrong")},failure:function(a,b,c){}},updateCategoriesCallback={success:function(a,b){var c=JSON.parse(a);1==c.status?(totalPage=$(".pagination").pagination("getPagesCount"),$(".pagination").pagination("selectPage",totalPage),$(".new-category").val(""),$(".update-category-container").hide()):showPopup(c)},failure:function(a,b,c){}},addCategoriesCallback={success:function(a,b){var a=JSON.parse(a);a.status?(totalPage=$(".pagination").pagination("getPagesCount"),$(".add-status").text("Status:"+a.message),$(".add-status").show(),$(".new-category").val(""),$(".pagination").pagination("selectPage",totalPage)):$(".add-status").text("Status:"+a.message)},failure:function(a,b,c){alert("Error in adding category")}};
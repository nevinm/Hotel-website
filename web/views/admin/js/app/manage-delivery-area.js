function getDeliveryAreas(a){var b=baseURL+"cms/get_delivery_areas/";header={"session-key":localStorage.session_key},params={nextPage:a},data=JSON.stringify(params);var c=new AjaxHttpSender;c.sendPost(b,header,data,getDeliveryAreasCallback)}function populateDeliveryAreas(a){$("#delivery-area tbody tr").remove(),$.each(a.aaData,function(a,b){$("#delivery-area tbody").append("<tr data-id='"+b.id+"'><td class='zip-value'>"+b.zip+"</td><td><input type='button' class='btn btn-small-primary medium-green' id='edit-zip' value='EDIT'></td><td><input type='button' class='btn btn-small-primary medium-green' id='delete-zip' value='DELETE'></td></tr>")}),$(".pagination").pagination({pages:a.num_pages,currentPage:a.current_page,cssStyle:"light-theme",onPageClick:function(a,b){getDeliveryAreas(a)},onInit:function(){if(getStringAfterHash(location.href,"#")){var a=getStringAfterHash(location.href,"#");-1!=a.indexOf("page")&&(pageNumber=getStringAfterHash(a,"-"),$(".pagination").pagination("getCurrentPage")==pageNumber||$(".pagination").pagination("selectPage",pageNumber))}}})}function manageDeliveryArea(a,b,c,d){var e=baseURL+"cms/manage_delivery_area/";header={"session-key":localStorage.session_key},params={edit_id:a,delete_id:b,zip:c},data=JSON.stringify(params);var f=new AjaxHttpSender;f.sendPost(e,header,data,manageDeliveryAreaCallback,d)}function showPopupMessage(a){$(".popup-message span").text(a.message),$(".popup-message").show(),setTimeout(function(){$(".popup-message").hide()},2e3)}function deleteZip(a){$("tr[data-id='"+a+"']").remove()}var current_tr;$(document).ready(function(){$("#add-new-delivery-area").on("click",function(){$("#add-edit-button").val("ADD"),$(".header").text("ADD NEW DELIVERY AREA"),$(".popup-wrapper").show(),$("form#manage-zip").validate().resetForm()}),$("#add-edit-button").on("click",function(a){if(a.preventDefault(),$("#manage-zip").valid()){if("ADD"==$(this).val()){var b=$("#new-address").val();manageDeliveryArea("","",b)}if("UPDATE"==$(this).val()){var c=current_tr.attr("data-id"),b=$("#new-address").val();manageDeliveryArea(c,"",b)}}}),$(document).on("click","#delete-zip",function(){$(".popup-wrapper").hide();var a=$(this).closest("tr").attr("data-id");$("#yes-button").attr("data-id",a),$(".confirm-popup-wrapper").show()}),$("#yes-button").on("click",function(){var a=$(this).attr("data-id");$(".confirm-popup-wrapper").hide(),manageDeliveryArea("",a,"","delete")}),$("#no-button").on("click",function(){$(".confirm-popup-wrapper").hide()}),$(document).on("click","#edit-zip",function(){var a=$(this).closest("tr").find(".zip-value").text();$("#add-edit-button").val("UPDATE"),$(".header").text("CHANGE DELIVERY AREA"),$("#new-address").val(a),$(".popup-wrapper").show(),current_tr=$(this).closest("tr"),$("#manage-zip").validate().resetForm()}),getDeliveryAreas(1),downloadOrderCSV("cms/export_zips_unsupported/","download-zips-form")});var getDeliveryAreasCallback={success:function(a,b){var c=JSON.parse(a);populateDeliveryAreas(c)},failure:function(a,b,c){}},manageDeliveryAreaCallback={success:function(a,b,c){var d=JSON.parse(a);return-1==d.status?(showPopupMessage(d),0):("delete"==c?deleteZip(d.id):getDeliveryAreas(1),void $(".popup-wrapper").hide())},failure:function(a,b,c){}};
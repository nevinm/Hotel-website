function getOrders(a,b,c,d,e,f,g,h){$("#order-list tbody").empty();var i=baseURL+"cms/get_kitchen_orders/",j={"session-key":localStorage.session_key},k={nextPage:a,search:b,num:c,status:d};data=JSON.stringify(k);var l=new AjaxHttpSender;l.sendPost(i,j,data,getOrdersCallback)}function updateOrders(a,b,c,d){var e=baseURL+"cms/update_order/"+b+"/",f={"session-key":localStorage.session_key},g={produced_meals:a,meal_status:c};data=JSON.stringify(g);var h=new AjaxHttpSender;h.sendPost(e,f,data,updateOrdersCallback,d)}function undefinedCheck(a){return"undefined"==typeof a?"NULL":a}function populateOrderList(a){$("#order-list tbody").empty();var b=JSON.parse(a);$.each(b.aaData,function(a,b){var c=undefinedCheck(b.phone),d=undefinedCheck(b.user_first_name+" "+b.user_last_name),e=undefinedCheck(b.delivery_time),f=undefinedCheck(b.delivery_address.zip),g=undefinedCheck(b.time),h=undefinedCheck(b.id),g=undefinedCheck(b.minutes),i=undefinedCheck(b.status),j=convertToMeridianTime(e);$.each(b.meals,function(a,b){var e=$($("#order-list tbody .row:nth-last-child(2)")[0]).data("order-id");e&&e==h||$("#order-list tbody").append("<tr class='row space' data-order-id='"+h+"' data-meal-id='"+b.id+"'><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>"),$("#order-list tbody").append("<tr class='row' data-order-id='"+h+"' data-meal-id='"+b.id+"'><td>"+j.date+"<br>"+j.time+"</td><td>"+h+"</td><td>"+b.quantity+"</td><td>"+b.name+"</td><td>"+g+"</td><td>"+f+"</td><td>"+d+"</td><td>"+c+"</td><td><b>"+i+"</b></td></tr>")})}),$(".pagination").pagination({pages:b.num_pages,currentPage:b.current_page,cssStyle:"light-theme",onPageClick:function(a,b){getOrders(a)},onInit:function(){if(getStringAfterHash(location.href,"#")){var a=getStringAfterHash(location.href,"#");-1!=a.indexOf("page")&&(pageNumber=getStringAfterHash(a,"-"),$(".pagination").pagination("getCurrentPage")==pageNumber||$(".pagination").pagination("selectPage",pageNumber))}}}),$(".order-status").on("change",function(){var a=$(this).data("order-id"),b=($(this).data("meal-id"),$(this).val()),c=($("select[data-order-id='"+a+"']"),[]);c.push($(this).data("meal-id")),updateOrders(c,a,b,this)})}$(document).ready(function(){getOrders(),setInterval(function(){getOrders()},6e4)});var getOrdersCallback={success:function(a,b){var c=JSON.parse(a);1==c.status&&(c.aaData.length>0?($(".order-list-empty").hide(),populateOrderList(a)):($(".order-list-empty").show(),$(".pagination").pagination({pages:0,cssStyle:"light-theme"})))},failure:function(a,b,c){}},updateOrdersCallback={success:function(a,b,c){updatedOrders=JSON.parse(a),updatedOrders.status?$(c).is(":checked")?$(c).parents().eq(1).addClass("produced-meal"):$(c).parents().eq(1).removeClass("produced-meal"):showPopup(a)},failure:function(a,b,c){}};